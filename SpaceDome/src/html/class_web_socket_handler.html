<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spacedome: WebSocketHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Spacedome
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_web_socket_handler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">WebSocketHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="websockethandler_8h_source.html">websockethandler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a10566b99600c52ec6333d4273095b91a" id="r_a10566b99600c52ec6333d4273095b91a"><td class="memItemLeft" align="right" valign="top"><a id="a10566b99600c52ec6333d4273095b91a" name="a10566b99600c52ec6333d4273095b91a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WebSocketHandler</b> (std::string address, int port, std::function&lt; void()&gt; connectionEstablished, std::function&lt; void()&gt; connectionClosed, std::function&lt; void(const void *, size_t)&gt; messageReceived)</td></tr>
<tr class="separator:a10566b99600c52ec6333d4273095b91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e814532fd2a57c32749d4d7c8a9ee9" id="r_af5e814532fd2a57c32749d4d7c8a9ee9"><td class="memItemLeft" align="right" valign="top"><a id="af5e814532fd2a57c32749d4d7c8a9ee9" name="af5e814532fd2a57c32749d4d7c8a9ee9"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>connect</b> (std::string protocolName, int bufferSize)</td></tr>
<tr class="separator:af5e814532fd2a57c32749d4d7c8a9ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43b03a83e45c73c239422bc3e7baf27" id="r_ad43b03a83e45c73c239422bc3e7baf27"><td class="memItemLeft" align="right" valign="top"><a id="ad43b03a83e45c73c239422bc3e7baf27" name="ad43b03a83e45c73c239422bc3e7baf27"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>disconnect</b> ()</td></tr>
<tr class="separator:ad43b03a83e45c73c239422bc3e7baf27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542351961238824741520d16139e34a6" id="r_a542351961238824741520d16139e34a6"><td class="memItemLeft" align="right" valign="top"><a id="a542351961238824741520d16139e34a6" name="a542351961238824741520d16139e34a6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isConnected</b> () const</td></tr>
<tr class="separator:a542351961238824741520d16139e34a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e7dd8fb7810815fe9cd34292c507d4a" id="r_a6e7dd8fb7810815fe9cd34292c507d4a"><td class="memItemLeft" align="right" valign="top"><a id="a6e7dd8fb7810815fe9cd34292c507d4a" name="a6e7dd8fb7810815fe9cd34292c507d4a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>tick</b> ()</td></tr>
<tr class="separator:a6e7dd8fb7810815fe9cd34292c507d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc40add5e357724eafdd339ef6bb73a1" id="r_acc40add5e357724eafdd339ef6bb73a1"><td class="memItemLeft" align="right" valign="top"><a id="acc40add5e357724eafdd339ef6bb73a1" name="acc40add5e357724eafdd339ef6bb73a1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>queueMessage</b> (std::string message)</td></tr>
<tr class="separator:acc40add5e357724eafdd339ef6bb73a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2efc5a533d6b7f385531b83d447cc3c2" id="r_a2efc5a533d6b7f385531b83d447cc3c2"><td class="memItemLeft" align="right" valign="top"><a id="a2efc5a533d6b7f385531b83d447cc3c2" name="a2efc5a533d6b7f385531b83d447cc3c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>queueMessage</b> (std::vector&lt; std::byte &gt; message)</td></tr>
<tr class="separator:a2efc5a533d6b7f385531b83d447cc3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a991b0845d2d47d4c5906cf2f8393408c" id="r_a991b0845d2d47d4c5906cf2f8393408c"><td class="memItemLeft" align="right" valign="top"><a id="a991b0845d2d47d4c5906cf2f8393408c" name="a991b0845d2d47d4c5906cf2f8393408c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>queueSize</b> () const</td></tr>
<tr class="separator:a991b0845d2d47d4c5906cf2f8393408c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class handles a websocket connection using the libwebsocket library. To establish a connection, first create an instance of this class using the address of the remote address you want to connect to, the port at which to connect to the remote, and callbacks for when messages are received through this socket connection (see below). Then call the connect method with a specific protocolName (which has to match the clients parameter in the <code>new WebSocket(url, 'protocol')</code> call) and a buffer size in which a received message has to fit.</p>
<p>After that, the tick method has to be called regularly (preferrably every frame) by your application to be able to receive messages.</p>
<p>If you want send a message to the client, you can queue a message to be sent using the queueMessage method, which will add the message to the queue handled internally. At any point you can query the size of the queue through the queueSize method.</p>
<p>You can prematurely close the connection through the disconnect message.</p>
<p>Callbacks:</p><ul>
<li><code>connectionEstablished</code> This callback is called when the inital handshaking has been performed and the connection is ready to be used</li>
<li><code>connectionClosed</code> This callback is called when the connection is closed by the remote host. The same <a class="el" href="class_web_socket_handler.html">WebSocketHandler</a> instance can then be reused in a subsequent connect call to initialize a new connection</li>
<li><code>messageReceived</code> This callback is called when a new message is received from the remote host. The parameters to the callback are a pointer to the message and the length of the message in bytes. </li>
</ul>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="websockethandler_8h_source.html">websockethandler.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
